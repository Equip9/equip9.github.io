I"z	<p>The ThunderboltLabs guys have a great post about using <a href="http://thunderboltlabs.com/posts/restkit-object-mapping-with-rubymotion.html">RestKit with RubyMotion</a>. I was trying to follow their instructions, but I noticed that some methods are deprecated in <a href="http://restkit.org/">RestKit</a> 0.20.0. Now, RestKit uses <a href="http://afnetworking.com/">AFNetworking</a> and some code changes.</p>

<p>Translating Objective-C code to Ruby is not difficult, but I had some trouble when I had to write a <em>block</em>.</p>

<p>Here is an Objective-C block,</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">operation</span> <span class="nf">setCompletionBlockWithSuccess</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">RKObjectRequestOperation</span> <span class="o">*</span><span class="n">operation</span><span class="p">,</span> <span class="n">RKMappingResult</span> <span class="o">*</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@"The public timeline Tweets: %@"</span><span class="p">,</span> <span class="p">[</span><span class="n">result</span> <span class="nf">array</span><span class="p">]);</span>
<span class="p">}</span> <span class="nf">failure</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre></div></div>

<p>Translated to a Ruby block in RubyMotion,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">operation</span><span class="p">.</span><span class="nf">setCompletionBlockWithSuccess</span><span class="p">(</span>
  <span class="nb">lambda</span> <span class="k">do</span> <span class="o">|</span><span class="n">operation</span><span class="p">,</span> <span class="n">result</span><span class="o">|</span> 
    <span class="nb">puts</span> <span class="s2">"The public timeline Tweets: "</span> <span class="o">+</span> <span class="n">result</span><span class="p">.</span><span class="nf">array</span><span class="p">.</span><span class="nf">inspect</span>
  <span class="k">end</span><span class="p">,</span>
  <span class="ss">failure: </span><span class="kp">nil</span><span class="p">)</span>
</code></pre></div></div>

:ET